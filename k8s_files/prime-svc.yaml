apiVersion: v1
kind: Service
metadata:
  name: amazon-prime-svc
  namespace: amazon-prime
  labels:
    app: amazon-prime
spec:
  # Using NodePort is necessary if you need that specific port access,
  # but for Ingress, 'ClusterIP' is often preferred as it's cleaner.
  type: ClusterIP 
  selector:
    app: amazon-prime
  ports:
    - name: http
      port: 80
      targetPort: 3000
      #nodePort: 30804 # Keep this if you want fixed NodePort access
      protocol: TCP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: prime-ingress
  namespace: amazon-prime
spec:
  ingressClassName: nginx
  rules:
    - host: prime.tatsumaki.local
      http:
        paths:
          - path: /                   # <-- Correct position and indentation
            pathType: Prefix
            backend:
              service:
                name: amazon-prime-svc
                port:
                  number: 80

